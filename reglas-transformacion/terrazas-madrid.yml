prefixes:
  rr: http://www.w3.org/ns/r2rml#
  foaf: http://xmlns.com/foaf/0.1/
  xsd: http://www.w3.org/2001/XMLSchema#
  rdfs: http://www.w3.org/2000/01/rdf-schema#
  rev: http://purl.org/stuff/rev#
  schema: http://schema.org/
  dct: http://purl.org/dc/terms/
  rml: http://semweb.mmlab.be/ns/rml#
  ql: http://semweb.mmlab.be/ns/ql#
  rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns#
  esadm: http://vocab.linkeddata.es/datosabiertos/def/sector-publico/territorio#
  escom: http://vocab.ciudadesabiertas.es/def/comercio/tejido-comercial
  escom-skos: http://vocab.linkeddata.es/datosabiertos/kos/comercio
  owl: http://www.w3.org/2002/07/owl
  skos: http://www.w3.org/2004/02/skos/core
  rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns
  vann: http://purl.org/vocab/vann
  dc: http://purl.org/dc/elements/1.1


mappings:
  terraza:
    sources:
      - [/data/OPEN_DATA_Terrazas202107.csv~csv]
    s: http://datos.madrid.es/recurso/terraza/$(id_terraza)
    po:
      - [a, escom:Terraza]
      - [escom:superficie,$(Superficie_ES) ,xsd:float]
      - [escom:numeroMesasAutorizadas,$(mesas_es),xsd:integer]
      - [escom:numeroSillasAutorizadas,$(sillas_es),xsd:integer]
      - [schema:openingHours, Estacional Lun-Juev $(hora_ini_LJ-es) - $(hora_fin_LJ_es)]
      - [schema:openingHours, Estacional Vier-Dom $(hora_ini_VS-es) - $(hora_fin_VS_es)]
      - [schema:openingHours, Anual Lun-Juev $(hora_ini_LJ-ra) - $(hora_fin_LJ_ra)]
      - [schema:openingHours, Anual Vier-Dom $(hora_ini_VS-ra) - $(hora_fin_VS_ra)] 
      - [escom:periodoFuncionamiento,escom-skos:periodo-funcionamiento/$(id_periodo_funcionamiento)~iri]
      - p: escom:perteneceA
        o:
          - mapping: localcomercial
      - p: escom:tieneLicenciaApertura
        o:
          - mapping: licenciaapertura
            condition:
              function: equal
              parameters:
                - [str1, $(id_local)]
                - [str2, $(id_local)]
      - p: schema:address
        o:
          - mapping: direccionpostal

  localcomercial:
    sources:
      - [/data/OPEN_DATA_Terrazas202107.csv~csv]
    s: http://datos.madrid.es/recurso/localcomercial/$(id_local)
    po:
      - [a, escom:LocalComercial] # NO COMPELTO! faltaria sus propiedades de datos y objeto por definir

  licenciaapertura:
    sources:
      - [/data/OPEN_DATA_Licencias202108.csv~csv]
    s: http://datos.madrid.es/recurso/licenciaapertura/$(id_tipo_licencia)
    po:
      - [a, escom:LicenciaApertura] # NO COMPELTO! faltaria sus propiedades de datos y objeto por definir

  direccionpostal:
    sources:
      - [/data/OPEN_DATA_Terrazas202107.csv~csv]
    s: http://datos.madrid.es/recurso/direccionpostal/$(id_vial_edificio)-$(num_edificio)-$(Cod_Postal)
    po:
      - [a, esdir:DireccionPostal] # NO COMPELTO! faltaria sus propiedades de datos y objeto por definir

  distrito:
    sources:
      - [/data/OPEN_DATA_Terrazas202107.csv~csv]
    s: http://datos.madrid.es/recurso/distrito/$(id_distrito_local)
    po:
      - [a, esdam:Distrito]
      - [owl:sameAs, $(wikidata_distrito)~iri] # NO COMPELTO! faltaria sus propiedades de datos y objeto por definir

